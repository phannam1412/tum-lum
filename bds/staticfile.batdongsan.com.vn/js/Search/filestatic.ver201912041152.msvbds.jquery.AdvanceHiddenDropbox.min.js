(function(n){function t(n){var r="",u,i,t;if(n==null)return r;for(i="a",t=0;t<n.length;t++)(i!==" "||n[t]!==" ")&&(i=n[t],u="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZàáảãạâầấẩẫậăằắẳẵặèéẻẽẹêềếểễệđìíỉĩịòóỏõọôồốổỗộơờớởỡợùúủũụưừứửữựỳýỷỹỵÀÁẢÃẠÂẦẤẨẪẬĂẰẮẲẴẶÈÉẺẼẸÊỀẾỂỄỆĐÌÍỈĨỊÒÓỎÕỌÔỒỐỔỖỘƠỜỚỞỠỢÙÚỦŨỤƯỪỨỬỮỰỲÝỶỸỴÂĂĐÔƠƯ1234567890~!@#$%^&*()_+=-{}][|\":;'\\/.,<>? \n\r\t".indexOf(i),u>=0&&(r+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZaaaaaaaaaaaaaaaaaeeeeeeeeeeediiiiiooooooooooooooooouuuuuuuuuuuyyyyyAAAAAAAAAAAAAAAAAEEEEEEEEEEEDIIIOOOOOOOOOOOOOOOOOOOUUUUUUUUUUUYYYYYAADOOU1234567890~!@#$%^&*()_+=-{}][|\":;'\\/.,<>? \n\r\t"[u]));return r}function i(n){n=Math.round(n*10)/10;var t;return n>=1e9?(t=n/1e9,t+" tỷ "):n>=1e6?(t=n/1e6,t+" triệu "):n===0?(t=n,t+" đồng "):u(n)}function u(n){n=Math.round(n*10)/10;var i="",t;return n>=1e9&&(t=Math.floor(n/1e9),i+=t+" tỷ ",n=n-t*1e9),n>=1e6&&(t=Math.floor(n/1e6),i+=t+" triệu ",n=n-t*1e6),n>=1e3&&(t=Math.floor(n/1e3),i+=t+" nghìn ",n=n-t*1e3),n>0&&(i+=n+" đồng"),i}function f(t,i,r){var u,f;if(window.event)u=window.event.keyCode;else if(i)u=i.which;else return!0;return u===86&&i.ctrlKey===!0||u===67&&i.ctrlKey===!0?!0:(u>=96&&u<=105&&(u=u-48),f=String.fromCharCode(u),u==null||u===0||u===8||u===9||u===27||u===16||u===35||u===36||u===46||u>=48&&u<=57||u===37||u===39)?!0:u===13?(n(t).attr("id")==="txtBetMoney"&&BetlogInsert(),!1):"0123456789".indexOf(f)>-1?!0:r&&(u===190||u===110)?n(t).val().indexOf(".")<0:!1}function r(t){this.Value=n("#"+t.hddValue);this.divOptions=n("#"+t.id);for(var i in t)this.divOptions.attr(i,t[i]);return this.txtMinValue=t.minValue!==undefined?n("#"+t.minValue):null,this.txtMaxValue=t.maxValue!==undefined?n("#"+t.maxValue):null,this.lstValue=this.divOptions.children("ul").children(),this.selectText=n("#"+t.ddlId).children(".select-text"),this.bgIcon=this.selectText.css("background-image"),this.textDefault=n(this.lstValue[0]).text(),this.valueDefault=n(this.lstValue[0]).attr("vl"),this.unitPrice=t.unit!==undefined?t.unit:null,this.lblMin=n("#"+t.lblMin),this.lblMax=n("#"+t.lblMax),this}AdvanceHiddenDropbox=function(u){function c(t,i){var e=i.keyCode?i.keyCode:i.which,r,u;e===13?(i.data.CheckToClose(),i.preventDefault()):(r=n(t).attr("decimal")==="true",u=f(t,i,r),u||i.preventDefault())}function l(t,i){i.data.UpdateTextValue();var r=n(t).val();n(t).attr("id")===u.minValue?i.data.minValue=parseFloat(r):i.data.maxValue=parseFloat(r);i.data.me.Value.val("")}var o=n(this),h,s;if(o.length===0)return null;u=n.extend(u,{ddlId:o.attr("id")});this.me=new r(u);u.css&&this.me.divOptions.css(u.css);this.me.divOptions.children("ul").css("min-width",o.width()+"px");this.me.divOptions.children("ul").children("li").css("min-width",o.width()-32+"px");this.me.divOptions.children("ul").height()>300&&this.me.divOptions.css("width",o.width()+22+"px");this.me.divOptions.width()<o.width()&&this.me.divOptions.css("width",o.width()+"px");h=window.navigator.userAgent;(u.autocomplete===!0||u.id==="divCityOptions"||u.id==="divDistrictOptions"||u.id==="divWardOptions"||u.id==="divStreetOptions"||u.id==="divProjectOptions"||u.id==="divCityCompareOptions"||u.id==="divDistrictCompareOptions"||u.id==="divWardCompareOptions"||u.id==="divStreetCompareOptions"||u.id==="divProjectCompareOptions")&&h.indexOf("MSIE")<0&&h.indexOf("Trident")<0&&o.attr("enable")!=="false"&&this.me.selectText.html('<input type="text" class="select-text-content" value="'+this.me.textDefault+'" placeholder="'+this.me.textDefault+'"/>');this.me.selectText.children().css("width",this.me.selectText.width()-25+"px");this.me.selectText.children(".select-text-content").off("keypress keydown keyup");this.me.selectText.on("click",this,function(t){var e,i,f;if(o.attr("enable")==="false")return n(this);if(n(".advance-select-options:visible").length>=0&&n(".advance-select-options:visible").each(function(i,u){var f={hddValue:n(u).attr("hddValue"),id:n(u).attr("id"),minValue:n(u).attr("minValue"),maxValue:n(u).attr("maxValue"),ddlId:n(u).attr("ddlId"),unit:n(u).attr("unit"),lblMin:n(u).attr("lblMin"),lblMax:n(u).attr("lblMax")};t.data.CheckToClose(new r(f))}),t.preventDefault(),t.stopPropagation(),t.data.me.selectText.children("input.select-text-content").length>0&&(t.data.me.selectText.css("background-image","none"),n(this).children().val(""),t.data.me.selectText.children().removeAttr("placeholder")),t.data.me.divOptions.css("display")==="none"){if(n(this).children().removeAttr("readonly"),e=n(t.data).offset(),t.data.me.divOptions.css("position")!=="fixed")if(i=t.data.me.divOptions.attr("nodiv"),f=u.top>0?u.top:26,i==undefined||i!=="1")t.data.me.divOptions.css("top",n(t.data).position().top+n(t.data).height()+"px"),t.data.me.divOptions.css("left",n(t.data).position().left+"px");else{var s=n(".timkiems #lblSearch").html()==="Bỏ tìm nâng cao",h=t.data.me.divOptions.attr("noadv")=="1",c=t.data.me.divOptions.attr("ddlid"),l=parseInt(n("#"+c).position().top)+33;f=l;t.data.me.divOptions.css("top",f+"px");s&&!h&&t.data.me.divOptions.css("margin-left","16px")}t.data.me.divOptions.css("display","block");t.data.me.divOptions.children("ul").children("li").removeClass("current");t.data.me.Value.val()!=null&&t.data.me.Value.val().length>0&&(t.data.me.txtMaxValue==null||t.data.me.txtMaxValue.val().length==0)&&(t.data.me.txtMinValue==null||t.data.me.txtMinValue.val().length==0)?t.data.me.divOptions.children("ul").children("[vl="+t.data.me.Value.val()+"]").addClass("current"):t.data.me.divOptions.children("ul").children("li:nth-child(1)").addClass("current");n("body").bind("click",t.data,function(i){n(i.target).hasClass("advance-options")?(i.preventDefault(),i.stopPropagation()):t.data.me.divOptions.css("display")!=="none"&&i.data.CheckToClose()})}else t.data.me.divOptions.css("display","none"),n(this).children().attr("readonly","true"),t.data.SetValue();return n(this)});this.me.selectText.children(".select-text-content").on("focus",function(){var t=n(this);return t.data("before",t.val()),t.val(""),t.css("color","#00f"),t.attr("style","width: 100% !important"),t}).on("change",this,function(i){var r=i.data,u=t(n(this).val()).trim().toLowerCase();u.length>0?n(r.me.lstValue).each(function(){var i=t(n(this).text()).trim().toLowerCase();n(this).attr("vl")===""||n(this).attr("vl")==="0"||n(this).attr("vl")==="CN"||i.indexOf(u)<0?n(this).hide():n(this).show()}):n(r.me.lstValue).show()}).on("keydown",this,function(t){var r=t.keyCode?t.keyCode:e.which,i,c,f,o,s,l,h,u,a;if(r===13||r===9){try{i=t.data.me.divOptions.children("ul").children("li.current:visible");i.length===1?i.trigger("click"):(c=t.data.me.divOptions.children("ul").children("li:visible"),c!==undefined&&c.length>0&&n(c[0]).trigger("click"))}catch(v){}if(r===13)return t.preventDefault(),t.stopPropagation(),!1}else if(r===40||r===38)if(i=t.data.me.divOptions.children("ul").children("li:visible"),i.length>0){if(i=t.data.me.divOptions.children("ul").children("li.current:visible"),i.length>0){if(i=n(i[0]),i.removeClass("current"),r===40){for(o=i;o.hasClass("advance-options")&&o.next(":not(:visible)").length>0;)o=o.next();o.next(":visible").length>0&&(i=o.next())}else if(r===38){for(s=i;s.hasClass("advance-options")&&s.prev(":not(:visible)").length>0;)s=s.prev();s.prev(":visible").length>0&&(i=s.prev())}}else t.data.me.divOptions.children("ul").children("li").removeClass("current"),i=n(t.data.me.divOptions.children("ul").children("li:visible")[0]);i!==undefined&&i.length>0&&(i.addClass("current"),n(this).val(i.text().trim()),f=t.data.me.divOptions.children("ul").children("li:first").outerHeight(),l=t.data.me.divOptions.children("ul").height()-f,h=i.siblings(":visible").andSelf().index(i),r===40?t.data.me.divOptions.children("ul").scrollTop()+l<h*f&&t.data.me.divOptions.children("ul").scrollTop(h*f-l):t.data.me.divOptions.children("ul").scrollTop()>h*f&&t.data.me.divOptions.children("ul").scrollTop(h*f))}else t.data.me.selectText.trigger("click");else r===35?(a=t.data.me.divOptions.children("ul").children("li").length,f=t.data.me.divOptions.children("ul").children("li:first").outerHeight(),t.data.me.divOptions.children("ul").scrollTop(a*f),u=t.data.me.divOptions.children("ul").children("li"),u.length>0&&(n(u).removeClass("current"),n(u[u.length-1]).addClass("current"))):r===36&&(t.data.me.divOptions.children("ul").scrollTop(0),u=t.data.me.divOptions.children("ul").children("li"),u.length>0&&(n(u).removeClass("current"),n(u[0]).addClass("current")));return!0}).on("keyup",function(t){var r=t.keyCode?t.keyCode:e.which,i=n(this);return r===13?(t.preventDefault(),t.stopPropagation()):r===9?i.val().length===0&&i.val(i.data("before")):r!==40&&r!==38&&i.data("before")!==i.val()&&(i.data("before",i.val()),i.trigger("change")),!0}).on("keypress",function(n){var t=n.keyCode?n.keyCode:e.which;return t===13&&(n.preventDefault(),n.stopPropagation()),!0}).on("blur",this,function(){n(this).css("color","#000");n(this).css("width","193px")}).on("paste input",function(){var t=n(this);return t.data("before")!==t.val()&&(t.data("before",t.val()),t.trigger("change")),t});return this.minValue=0,this.maxValue=0,this.me.txtMinValue!=null&&(this.me.txtMinValue.bind("keydown",this,function(n){c(this,n)}),this.me.txtMinValue.bind("keyup",this,function(n){l(this,n)}),this.me.txtMinValue.bind("focus",this,function(){n(this).attr("placeholder","")}),this.me.txtMinValue.bind("blur",this,function(){n(this).attr("placeholder","Từ")})),this.me.txtMaxValue!=null&&(this.me.txtMaxValue.bind("keydown",this,function(n){c(this,n)}),this.me.txtMaxValue.bind("keyup",this,function(n){l(this,n)}),this.me.txtMaxValue.bind("focus",this,function(){n(this).attr("placeholder","")}),this.me.txtMaxValue.bind("blur",this,function(){n(this).attr("placeholder","Đến")})),this.ShowOptions=function(){this.me.selectText.trigger("click")},this.CheckToClose=function(t){var i,r,u;return t===undefined&&(t=this.me),t.txtMaxValue!=null&&t.txtMinValue!=null&&(t.txtMaxValue.val().length>0||t.txtMinValue.val().length>0)?(i=t.txtMinValue.val()!=undefined&&t.txtMinValue.val()!==""?parseFloat(t.txtMinValue.val()):"",r=t.txtMaxValue.val()!=undefined&&t.txtMaxValue.val()!==""?parseFloat(t.txtMaxValue.val()):"",i!==""&&r!==""&&r<i?(u=t.txtMaxValue.val(),t.txtMaxValue.val(t.txtMinValue.val()),t.txtMinValue.val(u)):(t.txtMaxValue.val(r),t.txtMinValue.val(i)),this.UpdateTextValue(t)):this.SetValue(null,t),t.divOptions.css("display","none"),n("body").unbind("click"),t.selectText.children("input.select-text-content").length>0&&(t.selectText.css("background-image",t.bgIcon),t.selectText.children().attr("placeholder",t.textDefault)),!0},this.UpdateTextValue=function(n){var t,u,r;n===undefined&&(n=this.me);n.txtMaxValue!=null&&n.txtMinValue!=null&&(n.txtMinValue.val().length===0&&n.txtMaxValue.val().length===0?this.SetValue(null,n):(t="",u=!1,n.unitPrice==="money"?(n.txtMinValue.val().length>0?(r=i(parseFloat(n.txtMinValue.val())*1e6),t+=n.txtMaxValue.val().length>0?r:">= "+r,n.lblMin.text(r),u=!0):n.lblMin.text(""),n.txtMaxValue.val().length>0?(r=i(parseFloat(n.txtMaxValue.val())*1e6),t+=n.txtMinValue.val().length>0?" - "+r:"<= "+r,n.lblMax.text(r),u=!0):n.lblMax.text("")):n.unitPrice==="area"&&(n.txtMinValue.val().length>0&&(t+=n.txtMaxValue.val().length>0?n.txtMinValue.val():">= "+n.txtMinValue.val(),u=!0),n.txtMaxValue.val().length>0&&(t+=n.txtMinValue.val().length>0?" - "+n.txtMaxValue.val():"<= "+n.txtMaxValue.val(),u=!0),t+=" m2"),u?n.selectText.addClass("hasvalue"):n.selectText.removeClass("hasvalue"),n.selectText.children()[0].tagName.toLowerCase()==="span"?n.selectText.children().text(t):n.selectText.children().val(t)))},this.UpdateOptions=function(n){this.me.divOptions.children("ul").html(n);this.me.lstValue=this.me.divOptions.children("ul").children();this.BindOptionEvent()},this.SetValue=function(t,i){var r,u,f;i===undefined&&(i=this.me);u=!1;t!==undefined&&t!=null&&i.divOptions.children("ul").children("[vl="+t+"]").length>0?r=i.divOptions.children("ul").children("[vl="+t+"]").text():(f=i.divOptions.children("ul").children("li.current:visible").length>0?n(i.divOptions.children("ul").children("li.current:visible")[0]):i.divOptions.children("ul").children("li:visible").length>0?n(i.divOptions.children("ul").children("li:visible")[0]):i.divOptions.children("ul").children(":nth-child(1)"),r=f.text(),t=f.attr("vl"));t==i.valueDefault?r=i.textDefault:u=!0;u?i.selectText.addClass("hasvalue"):i.selectText.removeClass("hasvalue");i.selectText.children()[0].tagName.toLowerCase()==="span"?i.selectText.children().text(r):i.selectText.children().val(r);i.Value.val(t);i.txtMaxValue!=null&&i.txtMaxValue.val("");i.txtMinValue!=null&&i.txtMinValue.val("")},this.GetValue=function(t){if(t===undefined)return this.me.Value.val();var i=this.me.divOptions.children("ul").children("[vl="+this.me.Value.val()+"]");if(i.length>0||(i=this.me.divOptions.children("ul").children(".current"),i.length>0))return n(i[0]).attr(t)},this.CheckValue=function(n){return this.me.divOptions.children("ul").children("li[vl="+n+"]").length>0},this.GetOptions=function(){var t=[];return this.me.divOptions.children("ul").children("li").each(function(){t.push({value:n(this).attr("vl"),text:n(this).text()})}),t},this.GetText=function(){return this.me.selectText.children()[0].tagName.toLowerCase()==="span"?n(this.me.selectText.children()[0]).text():n(this.me.selectText.children()[0]).val()},this.BindOptionEvent=function(){this.me.lstValue.bind("click",this,function(t){n("body").unbind("click");var i=n(this).attr("vl"),r=i!==t.data.me.valueDefault;t.data.me.Value.val(i);t.data.me.txtMinValue!=null&&t.data.me.txtMaxValue!=null&&(t.data.me.txtMinValue.val(""),t.data.me.txtMaxValue.val(""),t.data.me.lblMax.text(""),t.data.me.lblMin.text(""));r?t.data.me.selectText.addClass("hasvalue"):t.data.me.selectText.removeClass("hasvalue");t.data.me.selectText.children()[0].tagName.toLowerCase()==="span"?t.data.me.selectText.children().text(n(this).text()):t.data.me.selectText.children().val(n(this).text());t.data.me.divOptions.css("display","none");t.data._ChangeFunc!=null&&t.data._ChangeFunc(t.data._ChangeFuncScope);t.data.me.selectText.children("input.select-text-content").length>0&&(t.data.me.selectText.css("background-image",t.data.me.bgIcon),t.data.me.selectText.children().attr("placeholder",t.data.me.textDefault))})},this._ChangeFunc=null,this._ChangeFuncScope=null,this.BindChangeEvent=function(n,t){this._ChangeFunc=t;this._ChangeFuncScope=n},this._GoNextEventFunc=null,this._GoNextEventScope=null,this.BindTabEvent=function(n,t){this._TabEventFunc=t;this._TabEventScope=n},this.BindOptionEvent(),this.me.txtMaxValue!=null&&this.me.txtMinValue!=null&&(this.me.txtMaxValue.val().length>0||this.me.txtMinValue.val().length>0)?this.UpdateTextValue():this.me.divOptions.children("ul").children(".current").length>0?(s=this.me.divOptions.children("ul").children(".current").attr("vl"),this.SetValue(s)):(s=this.me.divOptions.children("ul").children(":first").attr("vl"),this.SetValue(s)),this};AdvanceHiddenDropbox.getValueById=function(){};n.fn.AdvanceHiddenDropbox=AdvanceHiddenDropbox;n.fn.AdvanceHiddenDropbox.getValueById=AdvanceHiddenDropbox.getValueById})(jQuery);